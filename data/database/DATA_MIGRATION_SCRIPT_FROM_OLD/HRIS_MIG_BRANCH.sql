create or replace PROCEDURE HRIS_MIG_BRANCH
AS
V_BRANCH_ID NUMBER;
V_STATUS CHAR(1 BYTE);
BEGIN
FOR V_BRANCH_LIST IN (select * from HR_SAL_SHEET_SETUP order by sal_sheet_code)
LOOP



BEGIN
SELECT BRANCH_ID INTO V_BRANCH_ID FROM HRIS_BRANCHES WHERE BRANCH_ID=V_BRANCH_LIST.SAL_SHEET_CODE;
EXCEPTION
  WHEN NO_DATA_FOUND THEN
BEGIN

IF(V_BRANCH_LIST.DELETED_FLAG='N') THEN
V_STATUS:='E';
ELSE
V_STATUS:='D';
END IF;

INSERT INTO HRIS_BRANCHES
(BRANCH_ID,
BRANCH_CODE,
BRANCH_NAME,
CREATED_DT,
STATUS,
COMPANY_ID)
VALUES
(V_BRANCH_LIST.SAL_SHEET_CODE,
V_BRANCH_LIST.SAL_SHEET_CODE,
V_BRANCH_LIST.SAL_SHEET_EDESC,
TRUNC(SYSDATE),
V_STATUS,
V_BRANCH_LIST.COMPANY_CODE
);






END;

END;





END LOOP;
END;