create or replace PROCEDURE HRIS_MIG_DESIGNATION
AS
V_DESIGNATION_ID NUMBER;
V_STATUS CHAR(1 BYTE);
BEGIN


FOR V_DESIGNATION_LIST IN (SELECT * FROM HR_DESIGNATION_CODE ORDER BY DESIGNATION_CODE)
LOOP

BEGIN
SELECT DESIGNATION_ID INTO V_DESIGNATION_ID FROM HRIS_DESIGNATIONS WHERE DESIGNATION_ID=V_DESIGNATION_LIST.DESIGNATION_CODE;
EXCEPTION
  WHEN NO_DATA_FOUND THEN
BEGIN

IF(V_DESIGNATION_LIST.DELETED_FLAG='N') THEN
V_STATUS:='E';
ELSE
V_STATUS:='D';
END IF;


INSERT INTO HRIS_DESIGNATIONS
(DESIGNATION_ID,DESIGNATION_CODE,DESIGNATION_TITLE,CREATED_DT,STATUS)
VALUES
(V_DESIGNATION_LIST.DESIGNATION_CODE,
V_DESIGNATION_LIST.DESIGNATION_CODE,
V_DESIGNATION_LIST.DESIGNATION_EDESC,
TRUNC(SYSDATE),
V_STATUS
);



END;
END;




END LOOP;
END;