CREATE OR REPLACE PROCEDURE HRIS_SHIFT_ADD(
    P_EMPLOYEE_ID HRIS_EMPLOYEE_SHIFT_ASSIGN.EMPLOYEE_ID%TYPE,
    P_SHIFT_ID HRIS_EMPLOYEE_SHIFT_ASSIGN.SHIFT_ID%TYPE,
    P_START_DATE HRIS_EMPLOYEE_SHIFT_ASSIGN.START_DATE%TYPE,
    P_END_DATE HRIS_EMPLOYEE_SHIFT_ASSIGN.END_DATE%TYPE,
    P_CREATED_BY HRIS_EMPLOYEE_SHIFT_ASSIGN.CREATED_BY%TYPE)
AS
  V_ID HRIS_EMPLOYEE_SHIFT_ASSIGN.ID%TYPE;
BEGIN
  SELECT NVL(MAX(ID),0) +1 INTO V_ID FROM HRIS_EMPLOYEE_SHIFT_ASSIGN;
  INSERT
  INTO HRIS_EMPLOYEE_SHIFT_ASSIGN
    (
      ID,
      EMPLOYEE_ID,
      SHIFT_ID,
      START_DATE,
      END_DATE,
      CREATED_DT,
      CREATED_BY
    )
    VALUES
    (
      V_ID,
      P_EMPLOYEE_ID,
      P_SHIFT_ID,
      P_START_DATE,
      P_END_DATE,
      TRUNC(SYSDATE),
      P_CREATED_BY
    );
  IF TRUNC(P_START_DATE) <= TRUNC(SYSDATE) THEN
    HRIS_REATTENDANCE(TRUNC(P_START_DATE),P_EMPLOYEE_ID);
  END IF;
END;